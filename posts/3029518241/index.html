<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover"><title>在 JavaScript 中修改 HTML 内容 | 雨梦清欢</title><meta name="author" content="R҉anm⌬"><meta name="copyright" content="R҉anm⌬"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="起因……  使用 Hexo 搭建网站的，大抵不会满足于主题的默认样式，尤其是对于某些适合魔改的主题而言。然而，若不想止步于简单的样式调整，便不可避免要动主题源码。虽然快捷，但后续升级时…… 大型修改好说，但微小的地方改多了，将来升级时可能会记不住。我就想，在一种极端情况下，不直接改动源码，能不能实现这些改动……  早在几年前，GitHub 上已经有文章介绍如何使用原生 js 代替 jQuery"><meta property="og:type" content="article"><meta property="og:title" content="在 JavaScript 中修改 HTML 内容"><meta property="og:url" content="https://blog.sakurink.eu.org/posts/3029518241/index.html"><meta property="og:site_name" content="雨梦清欢"><meta property="og:description" content="起因……  使用 Hexo 搭建网站的，大抵不会满足于主题的默认样式，尤其是对于某些适合魔改的主题而言。然而，若不想止步于简单的样式调整，便不可避免要动主题源码。虽然快捷，但后续升级时…… 大型修改好说，但微小的地方改多了，将来升级时可能会记不住。我就想，在一种极端情况下，不直接改动源码，能不能实现这些改动……  早在几年前，GitHub 上已经有文章介绍如何使用原生 js 代替 jQuery"><meta property="og:locale" content="zh_CN"><meta property="og:image" content="https://cdncf-assets.sakurink.eu.org/blogassets/img/randimg/9.jpg"><meta property="article:published_time" content="2024-06-16T10:32:42.000Z"><meta property="article:modified_time" content="2024-06-16T10:32:44.000Z"><meta property="article:author" content="R҉anm⌬"><meta property="article:tag" content="web"><meta property="article:tag" content="前端"><meta name="twitter:card" content="summary"><meta name="twitter:image" content="https://cdncf-assets.sakurink.eu.org/blogassets/img/randimg/9.jpg"><link rel="shortcut icon" href="/img/favicon.png"><link rel="canonical" href="https://blog.sakurink.eu.org/posts/3029518241/index.html"><link rel="preconnect" href="https://npm.elemecdn.com"><link rel="preconnect" href="//busuanzi.ibruce.info"><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://lf6-cdn-tos.bytecdntp.com/cdn/expire-1-M/font-awesome/6.0.0/css/all.min.css"><link rel="stylesheet" href="https://lf6-cdn-tos.bytecdntp.com/cdn/expire-1-M/node-snackbar/0.1.16/snackbar.min.css" media="print" onload='this.media="all"'><link rel="stylesheet" href="https://npm.elemecdn.com/@fancyapps/ui@latest/dist/fancybox/fancybox.css" media="print" onload='this.media="all"'><script>(()=>{const e={set:(e,t,o)=>{if(!o)return;const a=Date.now()+864e5*o;localStorage.setItem(e,JSON.stringify({value:t,expiry:a}))},get:e=>{const t=localStorage.getItem(e);if(!t)return;const{value:o,expiry:a}=JSON.parse(t);if(!(Date.now()>a))return o;localStorage.removeItem(e)}};window.btf={saveToLocal:e,getScript:(e,t={})=>new Promise(((o,a)=>{const n=document.createElement("script");n.src=e,n.async=!0,Object.entries(t).forEach((([e,t])=>n.setAttribute(e,t))),n.onload=n.onreadystatechange=()=>{n.readyState&&!/loaded|complete/.test(n.readyState)||o()},n.onerror=a,document.head.appendChild(n)})),getCSS:(e,t)=>new Promise(((o,a)=>{const n=document.createElement("link");n.rel="stylesheet",n.href=e,t&&(n.id=t),n.onload=n.onreadystatechange=()=>{n.readyState&&!/loaded|complete/.test(n.readyState)||o()},n.onerror=a,document.head.appendChild(n)})),addGlobalFn:(e,t,o=!1,a=window)=>{const n=a.globalFn||{};n[e]=n[e]||{},n[e][o||Object.keys(n[e]).length]=t,a.globalFn=n}};const t=()=>{document.documentElement.setAttribute("data-theme","dark"),null!==document.querySelector('meta[name="theme-color"]')&&document.querySelector('meta[name="theme-color"]').setAttribute("content","#0d0d0d")},o=()=>{document.documentElement.setAttribute("data-theme","light"),null!==document.querySelector('meta[name="theme-color"]')&&document.querySelector('meta[name="theme-color"]').setAttribute("content","#ffffff")};btf.activateDarkMode=t,btf.activateLightMode=o;const a=e.get("theme");"dark"===a?t():"light"===a&&o();const n=e.get("aside-status");void 0!==n&&document.documentElement.classList.toggle("hide-aside","hide"===n);/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)&&document.documentElement.classList.add("apple")})()</script><script>const GLOBAL_CONFIG={root:"/",algolia:void 0,localSearch:{path:"/search.xml",preload:!1,top_n_per_article:1,unescape:!1,languages:{hits_empty:"未找到符合您查询的内容：${query}",hits_stats:"共找到 ${hits} 篇文章"}},translate:{defaultEncoding:2,translateDelay:0,msgToTraditionalChinese:"繁",msgToSimplifiedChinese:"簡"},highlight:{plugin:"highlight.js",highlightCopy:!0,highlightLang:!0,highlightHeightLimit:200,highlightFullpage:!1,highlightMacStyle:!0},copy:{success:"复制成功",error:"复制失败",noSupport:"浏览器不支持"},relativeDate:{homepage:!1,post:!1},runtime:"天",dateSuffix:{just:"刚刚",min:"分钟前",hour:"小时前",day:"天前",month:"个月前"},copyright:void 0,lightbox:"fancybox",Snackbar:{chs_to_cht:"已切换为繁体中文",cht_to_chs:"已切换为简体中文",day_to_night:"已切换为深色模式",night_to_day:"已切换为浅色模式",bgLight:"#49b1f5",bgDark:"#1f1f1f",position:"top-center"},infinitegrid:{js:"https://npm.elemecdn.com/@egjs/infinitegrid@latest/dist/infinitegrid.min.js",buttonText:"加载更多"},isPhotoFigcaption:!1,islazyload:!1,isAnchor:!1,percent:{toc:!0,rightside:!1},autoDarkmode:!1}</script><script id="config-diff">var GLOBAL_CONFIG_SITE={title:"在 JavaScript 中修改 HTML 内容",isPost:!0,isHome:!1,isHighlightShrink:!1,isToc:!0,isShuoshuo:!1}</script><script data-pjax src="https://cdn-pg3-t.qhx.us.kg/safety/secmodule.js"></script><meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests"><meta name="referrer" content="no-referrer-when-downgrade"><link rel="stylesheet" href="/css/sakurink.css"><link rel="stylesheet" href="/css/consolex.css"><link rel="stylesheet" href="https://npm.elemecdn.com/lxgw-wenkai-screen-webfont/style.css" media="only x" onload='this.onload=null,this.media="all"'><link rel="stylesheet" href="https://cdncf-assets.sakurink.eu.org/libs/fonts/JiangChengYuanTi-400W/result.css" media="only x" onload='this.onload=null,this.media="all"'><link rel="stylesheet" href="https://cdncf-assets.sakurink.eu.org/libs/fonts/SourceHanSansCN-Normal/result.css" media="only x" onload='this.onload=null,this.media="all"'><link rel="stylesheet" href="https://cdncf-assets.sakurink.eu.org/libs/fonts/SourceHanSansCN-Medium/result.css" media="only x" onload='this.onload=null,this.media="all"'><link rel="stylesheet" href="https://cdncf-assets.sakurink.eu.org/libs/fonts/SourceHanSerifSC-Medium/result.css" media="only x" onload='this.onload=null,this.media="all"'><link rel="stylesheet" href="/css/runtime.css" media="print" onload='this.media="all"'><meta name="generator" content="Hexo 7.3.0"><link rel="alternate" href="/atom.xml" title="雨梦清欢" type="application/atom+xml"><link rel="alternate" href="/rss2.xml" title="雨梦清欢" type="application/rss+xml"></head><body><script>window.paceOptions={restartOnPushState:!1},btf.addGlobalFn("pjaxSend",(()=>{Pace.restart()}),"pace_restart")</script><link rel="stylesheet" href="/css/pace1.css"><script src="https://npm.elemecdn.com/pace-js@latest/pace.min.js"></script><div id="web_bg" style="background-image:url(//cdncf-assets.sakurink.eu.org/blogassets/img/background_img.jpg)"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img text-center"><img src="/img/avatar.png" onerror='onerror=null,src="/img/friend_404.gif"' alt="avatar"></div><div class="site-data text-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">79</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">34</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">7</div></a></div><div class="menus_items"><div class="menus_item"><span class="site-page group"><i class="fa-fw fas fa-book"></i> <span>文章</span><i class="fas fa-chevron-down"></i></span><ul class="menus_item_child"><li><a class="site-page child" href="/archives/"><i class="fa-fw fas fa-archive"></i> <span>归档</span></a></li><li><a class="site-page child" href="/categories/"><i class="fa-fw fas fa-folder-open"></i> <span>分类</span></a></li><li><a class="site-page child" href="/tags/"><i class="fa-fw fas fa-tags"></i> <span>标签</span></a></li></ul></div><div class="menus_item"><span class="site-page group"><i class="fa-fw fas fa-link"></i> <span>友链</span><i class="fas fa-chevron-down"></i></span><ul class="menus_item_child"><li><a class="site-page child" href="/friends/"><i class="fa-fw fas fa-user-group"></i> <span>友链</span></a></li><li><a class="site-page child" href="/atom.xml"><i class="fa-fw fas fa-rss"></i> <span>订阅</span></a></li></ul></div><div class="menus_item"><span class="site-page group"><i class="fa-fw fas fa-cubes"></i> <span>通用</span><i class="fas fa-chevron-down"></i></span><ul class="menus_item_child"><li><a class="site-page child" href="/music/"><i class="fa-fw fas fa-music"></i> <span>Music</span></a></li><li><a class="site-page child" href="/60s/"><i class="fa-fw fas fa-newspaper"></i> <span>每天60秒</span></a></li></ul></div><div class="menus_item"><span class="site-page group"><i class="fa-fw fas fa-heart"></i> <span>我的</span><i class="fas fa-chevron-down"></i></span><ul class="menus_item_child"><li><a class="site-page child" href="/about/"><i class="fa-fw fas fa-circle-info"></i> <span>关于</span></a></li><li><a class="site-page child" href="/update/"><i class="fa-fw fas fa-cloud-upload"></i> <span>更新</span></a></li></ul></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image:url(//cdncf-assets.sakurink.eu.org/blogassets/img/randimg/9.jpg)"><nav id="nav"><span id="blog-info"><a class="nav-site-title" href="/"><span class="site-name">雨梦清欢</span></a><a class="nav-page-title" href="/"><span class="site-name">在 JavaScript 中修改 HTML 内容</span></a></span><div id="menus"><div id="search-button"><span class="site-page social-icon search"><i class="fas fa-search fa-fw"></i> <span>搜索</span></span></div><div class="menus_items"><div class="menus_item"><span class="site-page group"><i class="fa-fw fas fa-book"></i> <span>文章</span><i class="fas fa-chevron-down"></i></span><ul class="menus_item_child"><li><a class="site-page child" href="/archives/"><i class="fa-fw fas fa-archive"></i> <span>归档</span></a></li><li><a class="site-page child" href="/categories/"><i class="fa-fw fas fa-folder-open"></i> <span>分类</span></a></li><li><a class="site-page child" href="/tags/"><i class="fa-fw fas fa-tags"></i> <span>标签</span></a></li></ul></div><div class="menus_item"><span class="site-page group"><i class="fa-fw fas fa-link"></i> <span>友链</span><i class="fas fa-chevron-down"></i></span><ul class="menus_item_child"><li><a class="site-page child" href="/friends/"><i class="fa-fw fas fa-user-group"></i> <span>友链</span></a></li><li><a class="site-page child" href="/atom.xml"><i class="fa-fw fas fa-rss"></i> <span>订阅</span></a></li></ul></div><div class="menus_item"><span class="site-page group"><i class="fa-fw fas fa-cubes"></i> <span>通用</span><i class="fas fa-chevron-down"></i></span><ul class="menus_item_child"><li><a class="site-page child" href="/music/"><i class="fa-fw fas fa-music"></i> <span>Music</span></a></li><li><a class="site-page child" href="/60s/"><i class="fa-fw fas fa-newspaper"></i> <span>每天60秒</span></a></li></ul></div><div class="menus_item"><span class="site-page group"><i class="fa-fw fas fa-heart"></i> <span>我的</span><i class="fas fa-chevron-down"></i></span><ul class="menus_item_child"><li><a class="site-page child" href="/about/"><i class="fa-fw fas fa-circle-info"></i> <span>关于</span></a></li><li><a class="site-page child" href="/update/"><i class="fa-fw fas fa-cloud-upload"></i> <span>更新</span></a></li></ul></div></div><div id="toggle-menu"><span class="site-page"><i class="fas fa-bars fa-fw"></i></span></div></div></nav><div id="post-info"><h1 class="post-title">在 JavaScript 中修改 HTML 内容</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2024-06-16T10:32:42.000Z" title="发表于 2024-06-16 18:32:42">2024-06-16</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2024-06-16T10:32:44.000Z" title="更新于 2024-06-16 18:32:44">2024-06-16</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E6%91%98%E5%BD%95%E7%AC%94%E8%AE%B0/">摘录笔记</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">总字数:</span><span class="word-count">4k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">阅读时长:</span><span>15分钟</span></span><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" data-flag-title=""><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">浏览量:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="container post-content" id="article-container"><blockquote><p>起因……</p></blockquote><p>使用 Hexo 搭建网站的，大抵不会满足于主题的默认样式，尤其是对于某些适合魔改的主题而言。然而，若不想止步于简单的样式调整，便不可避免要动主题源码。虽然快捷，但后续升级时……</p><p>大型修改好说，但微小的地方改多了，将来升级时可能会记不住。我就想，在一种极端情况下，不直接改动源码，能不能实现这些改动……</p><blockquote><p>早在几年前，GitHub 上已经有文章介绍如何使用原生 js 代替 jQuery 操作 DOM，例如：<a target="_blank" href="https://github.com/camsong/You-Dont-Need-jQuery/blob/master/README.zh-CN.md" rel="external nofollow noreferrer noopener">You-Dont-Need-jQuery<br></a></p></blockquote><p>使用 jQuery 完成这些事情确实能少写很多东西，但我的站点已经够慢了，总不能什么时候都引入这么大个库吧（虽然但是，嫌慢何不直接改代码……）。</p><p>本文中方法是通用的；相关例子不一定涵盖 js 相应功能的所有用处；本文中只列举了很小一部分 js 操作 DOM 的方法。</p><p>这是一篇笔记，而不是教程。<strong>如果想完整学习，建议直接去看 MDN、菜鸟教程这些地方</strong></p><h2 id="选择-DOM">选择 DOM</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;myButton&#x27;</span>);</span><br></pre></td></tr></table></figure><p>这个方法用于获取具有指定 id 属性的元素。在这个例子中，它会返回 id 为 myButton 的元素。如果没有找到匹配的元素，则返回 null。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">document</span>.<span class="title function_">getElementsByClassName</span>(<span class="string">&#x27;a&#x27;</span>);</span><br></pre></td></tr></table></figure><p>这个方法返回一个类数组对象，包含所有具有指定类名的元素。在这个例子中，它会返回所有具有 <code>class</code> 为 <code>a</code> 的元素集合。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">document</span>.<span class="title function_">getElementsByTagName</span>(<span class="string">&#x27;tagName&#x27;</span>);</span><br></pre></td></tr></table></figure><p>这个方法返回一个包含所有指定标签名的元素的集合（HTMLCollection）。例如，document.getElementsByTagName(‘div’) 会返回文档中所有的 <code>&lt;div&gt;</code> 元素。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">document</span>.<span class="title function_">getElementsByName</span>(<span class="string">&#x27;name&#x27;</span>);</span><br></pre></td></tr></table></figure><p>这个方法返回一个包含所有具有指定 name 属性的元素的集合（NodeList）。例如，document.getElementsByName(‘username’) 会返回所有 name 属性为 username 的元素。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">document</span>.<span class="property">documentElement</span>;</span><br></pre></td></tr></table></figure><p>这个属性返回文档的根元素，对于 HTML 文档来说，就是 <code>&lt;html&gt;</code> 元素</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">document</span>.<span class="property">body</span>;</span><br></pre></td></tr></table></figure><p>这个属性返回文档的 <code>&lt;body&gt;</code> 元素，即包含文档主体内容的元素</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;.className&#x27;</span>);</span><br></pre></td></tr></table></figure><p>这个方法返回文档中第一个匹配指定 CSS 选择器的元素。例如，<code>document.querySelector('.header')</code> 会返回文档中第一个具有 header 类的元素</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">document</span>.<span class="title function_">querySelectorAll</span>(<span class="string">&#x27;.parent .a&#x27;</span>);</span><br></pre></td></tr></table></figure><p>这个方法返回一个 NodeList，包含所有与指定 CSS 选择器匹配的元素。在这个例子中，它会返回所有 <code>.parent</code> 元素内的 <code>.a</code> 元素。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">document</span>.<span class="title function_">querySelectorAll</span>(<span class="string">&#x27;.parent &gt; .a&#x27;</span>);</span><br></pre></td></tr></table></figure><p>与上面那个类似，不过这里只返回 <code>.parent</code> 元素内的直接子元素 <code>.a</code> 元素。</p><h2 id="获取变量">获取变量</h2><table><thead><tr><th>特性</th><th>var</th><th>let</th><th>const</th></tr></thead><tbody><tr><td>作用域</td><td>函数作用域。在函数内部是局部变量，在函数外部是全局变量</td><td>块级作用域。只在它们所在的代码块内有效</td><td>块级作用域。只在它们所在的代码块内有效</td></tr><tr><td>变量提升</td><td>是。变量可以在声明之前使用，但值为 undefined</td><td>否。使用前必须先声明，否则会报错</td><td>否。使用前必须先声明，否则会报错</td></tr><tr><td>重复声明</td><td>允许</td><td>不允许</td><td>不允许</td></tr><tr><td>初始值</td><td>可选。声明的是变量</td><td>可选。声明的是变量</td><td>必须。声明的是常量，必须在声明时初始化</td></tr><tr><td>可修改性</td><td>可以</td><td>可以</td><td>不可以</td></tr><tr><td>全局对象属性</td><td>是</td><td>否</td><td>否</td></tr></tbody></table><h2 id="插入元素">插入元素</h2><p>例如，Hexo Butterfly 主题的右下角悬浮工具栏，最原始的情况下它渲染出来是这样的：</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;rightside&quot;</span> <span class="attr">class</span>=<span class="string">&quot;rightside-show&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;rightside-config-hide&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> <span class="attr">id</span>=<span class="string">&quot;translateLink&quot;</span> <span class="attr">type</span>=<span class="string">&quot;button&quot;</span> <span class="attr">title</span>=<span class="string">&quot;简繁转换&quot;</span>&gt;</span></span><br><span class="line">      繁</span><br><span class="line">    <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> <span class="attr">id</span>=<span class="string">&quot;darkmode&quot;</span> <span class="attr">type</span>=<span class="string">&quot;button&quot;</span> <span class="attr">title</span>=<span class="string">&quot;浅色和深色模式转换&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">&quot;fas fa-adjust&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">i</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> <span class="attr">id</span>=<span class="string">&quot;hide-aside-btn&quot;</span> <span class="attr">type</span>=<span class="string">&quot;button&quot;</span> <span class="attr">title</span>=<span class="string">&quot;单栏和双栏切换&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">&quot;fas fa-arrows-alt-h&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">i</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;rightside-config-show&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> <span class="attr">id</span>=<span class="string">&quot;rightside-config&quot;</span> <span class="attr">type</span>=<span class="string">&quot;button&quot;</span> <span class="attr">title</span>=<span class="string">&quot;设置&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">&quot;fas fa-cog fa-spin&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">i</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> <span class="attr">id</span>=<span class="string">&quot;go-up&quot;</span> <span class="attr">type</span>=<span class="string">&quot;button&quot;</span> <span class="attr">title</span>=<span class="string">&quot;回到顶部&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;scroll-percent&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">&quot;fas fa-arrow-up&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">i</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><p>实际上，它提供的几个按钮已经能满足基本使用，也可能是作者认为这里无需改动，截至目前，此主题的配置项中，对这里的悬浮菜单栏的调整只有少数几个功能的开关。但假设有这么个场景：</p><blockquote><p>在“繁”这个按钮上方添加两个按钮，从下往上分别为“刷新”和“弹窗”。</p></blockquote><p>如果不改源码，仅依靠 js 操作 DOM，我们可以采用<code>insertAdjacentElement()</code>方法，将一个给定的元素节点插入到相对于当前元素的指定位置。</p><details class="toggle"><summary class="toggle-button">insertAdjacentElement() 方法</summary><div class="toggle-content"><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">insertAdjacentElement</span>(position, element)</span><br></pre></td></tr></table></figure><p><code>position</code>表示相对于 <code>targetElement</code>的位置的字符串；必须是以下字符串之一（大小写不敏感）：</p><ul><li><code>beforebegin</code>：targetElement 之前。</li><li><code>afterbegin</code>：targetElement 内部的第一个子节点之前。</li><li><code>beforeend</code>：targetElement 内部的最后一个子节点之后。</li><li><code>afterend</code>：targetElement 之后。</li></ul><p><code>element</code>表示要插入到树中的元素。</p><p>position 的四个字符串对应如下：</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- beforebegin --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;target&quot;</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- afterbegin --&gt;</span></span><br><span class="line">  The quick brown fox jumps over the lazy dogelement</span><br><span class="line">  <span class="comment">&lt;!-- beforeend --&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- afterend --&gt;</span></span><br></pre></td></tr></table></figure><p>只有当节点处于 DOM 树中且有一个父元素时 beforebegin 和 afterend 才会生效。</p></div></details><p>现在这个问题就好办了，可以通过以下方法实现相关功能，把代码放到自定义 js 文件中并在配置文件中引入即可（MDN 给出的示例采用了箭头函数，若换那种写法会比下面这个简洁）：</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">window</span>.<span class="title function_">addEventListener</span>(<span class="string">&quot;pjax:complete&quot;</span>,rightsideAddon);<span class="comment">//适配 Hexo Butterfly 主题 pjax 功能。实际上你只需要关注这段代码中 function rightsideAddon() 包裹的部分</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">rightsideAddon</span>(<span class="params"></span>)&#123;</span><br><span class="line">  <span class="comment">//获取元素</span></span><br><span class="line">  <span class="keyword">const</span> darkmode = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;darkmode&quot;</span>);<span class="comment">//通过 getElementById 方法获取页面中名为 darkmode 的元素并将其存储在变量 darkmode 中，下同。</span></span><br><span class="line">  <span class="keyword">const</span> translateLink = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;translateLink&quot;</span>);</span><br><span class="line"></span><br><span class="line">  <span class="comment">//创建元素</span></span><br><span class="line">  <span class="keyword">const</span> buttonAlert = <span class="variable language_">document</span>.<span class="title function_">createElement</span>(<span class="string">&quot;button&quot;</span>);<span class="comment">// 创建 button 按钮元素并将其存储在变量 buttonAlert 中</span></span><br><span class="line">  buttonAlert.<span class="property">id</span> = <span class="string">&quot;alert&quot;</span>;<span class="comment">//设置 buttonAlert 元素的 id 属性为 Alert</span></span><br><span class="line">  buttonAlert.<span class="property">type</span> = <span class="string">&quot;button&quot;</span>;<span class="comment">//设置 buttonAlert 元素的 type 属性为 button</span></span><br><span class="line">  buttonAlert.<span class="property">innerHTML</span> = <span class="string">&#x27;&lt;i class=&quot;fas fa-hand-pointer&quot; /&gt;&#x27;</span>;<span class="comment">//设置 buttonAlert 元素内容为一个带有图标的 HTML 字符串，这里使用单引号包裹。你也可以将此处改为 textContent，后面用双引号包裹文本。</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> buttonRefresh = <span class="variable language_">document</span>.<span class="title function_">createElement</span>(<span class="string">&quot;button&quot;</span>);</span><br><span class="line">  buttonRefresh.<span class="property">id</span> = <span class="string">&quot;refresh&quot;</span>;</span><br><span class="line">  buttonRefresh.<span class="property">type</span> = <span class="string">&quot;button&quot;</span>;</span><br><span class="line">  buttonRefresh.<span class="property">innerHTML</span> = <span class="string">&#x27;&lt;i class=&quot;fas fa-sync-alt&quot;/&gt;&#x27;</span>;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 插入元素。若存在 position 相同的情况，则按照此处顺序进行加载。例如若将这两段代码调换位置，那么“刷新”按钮会在“弹窗”按钮上方。</span></span><br><span class="line">  translateLink.<span class="title function_">insertAdjacentElement</span>(<span class="string">&quot;beforebegin&quot;</span>, buttonAlert);<span class="comment">//将 buttonAlert 元素插入到 translateLink 元素之前，下同。</span></span><br><span class="line">  translateLink.<span class="title function_">insertAdjacentElement</span>(<span class="string">&quot;beforebegin&quot;</span>, buttonRefresh);</span><br><span class="line"></span><br><span class="line">  <span class="comment">//按钮对应的功能</span></span><br><span class="line">  buttonAlert.<span class="title function_">addEventListener</span>(<span class="string">&quot;click&quot;</span>, <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title function_">alert</span>(<span class="string">&quot;弹窗&quot;</span>);</span><br><span class="line">  &#125;);<span class="comment">//添加了一个点击事件监听器。当 buttonAlert 按钮被点击时，会弹出一个包含文本“弹窗”的警告框。</span></span><br><span class="line">  buttonRefresh.<span class="title function_">addEventListener</span>(<span class="string">&quot;click&quot;</span>, <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">    location.<span class="title function_">reload</span>();</span><br><span class="line">  &#125;);</span><br><span class="line"><span class="title function_">rightsideAddon</span>();</span><br></pre></td></tr></table></figure><p>这段 js 在经过浏览器渲染后是这样的（事件监听器部分省略）：</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">button</span> <span class="attr">id</span>=<span class="string">&quot;alert&quot;</span> <span class="attr">type</span>=<span class="string">&quot;button&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">&quot;fas fa-hand-pointer&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">button</span> <span class="attr">id</span>=<span class="string">&quot;refresh&quot;</span> <span class="attr">type</span>=<span class="string">&quot;button&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">&quot;fas fa-sync-alt&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span>  </span><br><span class="line"><span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="DOM-位置移动">DOM 位置移动</h2><p>还是上节那个示例，现在有这样一个需求：</p><blockquote><p>将齿轮按钮和返回顶部按钮的位置进行互换</p></blockquote><p>在 JavaScript 中有<code>insertBefore()</code>方法，用于在指定元素之前插入新元素。</p><details class="toggle"><summary class="toggle-button">insertBefore() 方法</summary><div class="toggle-content"><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> insertedNode = parentNode.<span class="title function_">insertBefore</span>(newNode, referenceNode);</span><br></pre></td></tr></table></figure><ul><li><code>insertedNode</code> 被插入节点 (newNode)</li><li><code>parentNode</code> 新插入节点的父节点</li><li><code>newNode</code> 用于插入的节点</li><li><code>referenceNode</code> newNode 将要插在这个节点之前。如果该值为<code>null</code>则 newNode 将被插入到子节点的末尾；不应将此值留空。</li></ul></div></details><p>现在需要做的便是：获取示例中两个按钮对应的元素（<code>rightsideConfig</code>和<code>goUpButton</code>），然后再获取父节点（示例中<code>rightsideConfig</code>是不动的，可以把它理解为“参照物”），然后将元素插入到这个父节点元素之前。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> rightsideConfig = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;rightside-config&quot;</span>);<span class="comment">//获取元素并储存变量</span></span><br><span class="line"><span class="keyword">const</span> goUpButton = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;go-up&quot;</span>);<span class="comment">//获取将要插入的节点</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> parentRightsideConfig = rightsideConfig.<span class="property">parentNode</span>;<span class="comment">//获取父节点</span></span><br><span class="line"></span><br><span class="line">parentRightsideConfig.<span class="title function_">insertBefore</span>(goUpButton, rightsideConfig);<span class="comment">//将 goUpButton 插入到 rightsideConfig 元素之前。与 MDN 中示例不同的是，这里 referenceNode 正好也是那个父节点，因此“少”写了一个变量获取</span></span><br></pre></td></tr></table></figure><p>也可以直接在父节点上执行插入操作（可能会导致两次 DOM 操作，对性能要求不苛刻的情况下与前面那种相似）：</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> rightsideConfig = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;rightside-config&quot;</span>);</span><br><span class="line"><span class="keyword">const</span> goUpButton = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;go-up&quot;</span>);</span><br><span class="line"></span><br><span class="line">rightsideConfig.<span class="property">parentNode</span>.<span class="title function_">insertBefore</span>(goUpButton, rightsideConfig);</span><br></pre></td></tr></table></figure><p>对于其他元素也是同理，例如把“浅色和深色模式转换”按钮移动到“设置”按钮上方，只需通过相同的方法获取其对应 id（<code>darkmode</code>）并储存变量，然后将“newNode”的位置进行替换即可。</p><p>前面一节，我们举了插入唤出弹窗的按钮的例子，如果使用<code>insertBefore()</code>方法，可以这样实现：</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="variable language_">window</span>.<span class="title function_">addEventListener</span>(<span class="string">&quot;pjax:complete&quot;</span>, rightsideAddon);</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">rightsideAddon</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> darkmode = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;darkmode&quot;</span>);</span><br><span class="line">  <span class="keyword">const</span> translateLink = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;translateLink&quot;</span>);</span><br><span class="line">  <span class="keyword">const</span> buttonAlertExist = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;alert&quot;</span>);</span><br><span class="line">  </span><br><span class="line">  <span class="comment">// 检查按钮是否已存在</span></span><br><span class="line">  <span class="keyword">if</span> (!buttonAlertExist) &#123;</span><br><span class="line">    <span class="keyword">const</span> buttonAlert = <span class="variable language_">document</span>.<span class="title function_">createElement</span>(<span class="string">&quot;button&quot;</span>);</span><br><span class="line">    buttonAlert.<span class="property">id</span> = <span class="string">&quot;alert&quot;</span>;</span><br><span class="line">    buttonAlert.<span class="property">type</span> = <span class="string">&quot;button&quot;</span>;</span><br><span class="line">    buttonAlert.<span class="property">innerHTML</span> = <span class="string">&#x27;&lt;i class=&quot;fas fa-hand-pointer&quot;&gt;&lt;/i&gt;&#x27;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 确保 translateLink 已定义</span></span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">typeof</span> translateLink !== <span class="string">&#x27;undefined&#x27;</span> &amp;&amp; translateLink.<span class="property">parentNode</span>) &#123;</span><br><span class="line">      translateLink.<span class="property">parentNode</span>.<span class="title function_">insertBefore</span>(buttonAlert, translateLink);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">  buttonAlert.<span class="title function_">addEventListener</span>(<span class="string">&quot;click&quot;</span>, <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title function_">alert</span>(<span class="string">&quot;弹窗&quot;</span>);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br><span class="line"><span class="title function_">rightsideAddon</span>();</span><br></pre></td></tr></table></figure><p>若 translateLink 存在且其父节点有效，代码会将新创建的按钮插入到 translateLink 之前。</p><details class="toggle"><summary class="toggle-button">有 Before，有没有 After？</summary><div class="toggle-content"><p>没有<code>insertAfter()</code>方法。可以通过将 insertBefore 方法与 Node.nextSibling 结合使用来模拟实现。</p><p>此处偷个懒，直接借用 MDN 的例子：</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;parentElement&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">span</span> <span class="attr">id</span>=<span class="string">&quot;childElement&quot;</span>&gt;</span>foo bar<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  <span class="comment">// 创建新的普通 &lt;span&gt; 元素</span></span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">let</span> sp1 = <span class="variable language_">document</span>.<span class="title function_">createElement</span>(<span class="string">&quot;span&quot;</span>);</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  <span class="comment">// 获取引用元素</span></span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">let</span> sp2 = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;childElement&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">  <span class="comment">// 获取父元素</span></span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">let</span> parentDiv = sp2.<span class="property">parentNode</span>;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  <span class="comment">// 在 sp2 之前插入新元素</span></span></span><br><span class="line"><span class="language-javascript">  parentDiv.<span class="title function_">insertBefore</span>(sp1, sp2);</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><p>可以使用以下方法在 sp2 后面插入 sp1：</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">parentDiv.<span class="title function_">insertBefore</span>(sp1, sp2.<span class="property">nextSibling</span>);</span><br></pre></td></tr></table></figure><p>如果 sp2 没有下一个兄弟节点，那么它必须是最后一个子节点——sp2.nextSibling 返回 null，此时 sp1 将被插入到子节点列表的末尾（紧接在 sp2 之后）。</p></div></details><h2 id="隐藏或移除">隐藏或移除</h2><p>如果希望隐藏一个元素，可以使用<code>Element.style.display = 'none'</code>或<code>Element.remove();</code>。二者的不同之处在于，前者只是隐藏该元素，后者会将此元素移除。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> buttonGoup = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;go-up&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> rightsideConfig = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;rightside-config&#x27;</span>);</span><br><span class="line"></span><br><span class="line">rightsideConfig.<span class="title function_">remove</span>();<span class="comment">//移除元素</span></span><br></pre></td></tr></table></figure><p>以上这段代码执行后，在页面结构中<code>&lt;button id=&quot;rightside-config&quot; type=&quot;button&quot; title=&quot;设置&quot;&gt;</code>及其子元素都会被移除。如果将代码中的<code>rightsideConfig.remove();</code>修改为<code>rightsideConfig.style.display = 'none'</code>，实际上是在该元素后添加属性<code>style=&quot;display: none;&quot;</code>，并算作真正删除元素。</p><h2 id="替换元素">替换元素</h2><p>或许有人想让页面中某些效果通过一定的操作再显示，譬如在哪里点了下，触发了某段 js 代码，然后页面发生了变化。</p><details class="toggle"><summary class="toggle-button">document.querySelector()</summary><div class="toggle-content"><p>文档对象模型 Document 引用的 <code>querySelector()</code> 方法返回文档中与指定选择器或选择器组匹配的第一个 Element 对象。如果找不到匹配项，则返回 null。</p><p>它与<code>Document.querySelectorAll</code>的区别之一便是当 DOM 中存在多个匹配结果时，前者只匹配第一个，后者会匹配所有。</p></div></details><p>这里可以采用 const 获取元素，之后通过 Element.className 或 <a target="_blank" href="http://Element.id" rel="external nofollow noreferrer noopener">Element.id</a> 进行修改。</p><p>例如，让前面那个例子中的 class 为<code>rightside-show</code>的元素修改为 class 为<code>rightside-show-re</code>，让 id 为<code>translateLink</code>的元素修改为<code>translateLink-re</code>，可以采取这样的方法：</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 获取要渲染内容的 div 元素</span></span><br><span class="line"><span class="keyword">const</span> rightsideShow = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;.rightside-show&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 修改第一个 div 的 class 和 id</span></span><br><span class="line">rightsideShow.<span class="property">className</span> = <span class="string">&#x27;rightside-show-re&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 获取 translateLink 元素</span></span><br><span class="line"><span class="keyword">const</span> translateLink = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;translateLink&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 修改元素的 class 属性</span></span><br><span class="line">translateLink.<span class="property">id</span> = <span class="string">&#x27;translateLink-re&#x27;</span>;</span><br></pre></td></tr></table></figure><h2 id="修改-class-以匹配不同样式">修改 class 以匹配不同样式</h2><details class="toggle"><summary class="toggle-button">Element.className 和 Element.classList</summary><div class="toggle-content"><p>Element.className 用于获取或设置指定元素的 class 属性的值。 Element.classList 是一个只读属性，返回一个元素 class 属性的动态 DOMTokenList 集合。这可以用于操作 class 集合。</p><p>相比将 element.className 作为以空格分隔的字符串来使用，classList 是一种更方便的访问元素的类列表的方法。</p></div></details><p>如果你提前把相应的 CSS 代码写好，那么在调整样式时可以只考虑修改元素的 class 名以匹配相应的样式，而不必通过 element 加后缀一个个设置。</p><p>这里可以通过<code>element.className</code>进行修改。仍以那个悬浮栏为例，假设有一个提前写好的 CSS 样式：</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.rightsideShow-r</span>&#123;</span><br><span class="line">  <span class="comment">/*相关样式，代码略*/</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>现在需要将这个 class 为<code>rightside-show</code>的元素进行调整，变更其类名，可以通过下面这个方法：</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> rightsideShow = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;.rightside-show&#x27;</span>);</span><br><span class="line"></span><br><span class="line">rightsideShow.<span class="property">className</span> = <span class="string">&#x27;rightsideShow-r&#x27;</span>;</span><br></pre></td></tr></table></figure><p>但这么做会存在一个问题：有时我们并不想让原来 class 类名匹配的样式失效（刚才这个方法会直接替换原有类名，也就是说选择器<code>rightside-show</code>相关的样式会失效）。</p><p>好在 js 中提供了<code>element.classList</code>方法，虽然是只读，但可通过<code>add()</code>、<code>remove()</code>等方法修改元素。下面三个是比较常用的：</p><table><thead><tr><th>方法</th><th>描述</th></tr></thead><tbody><tr><td>add(‘class1’, ‘class2’)</td><td>在元素中添加一个或多个类名。如果指定的类名已存在，则不会添加</td></tr><tr><td>remove(‘class1’, ‘class2’)</td><td>移除元素中一个或多个类名。当相应的类名不存在也不会报错</td></tr><tr><td>toggle(‘class’)</td><td>在元素中切换类名。如果这个值已存在，则移除它，否则添加它</td></tr></tbody></table><p>例如，有几个 CSS 样式：</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.rightside-show</span>&#123;</span><br><span class="line">  <span class="comment">/*原有样式，代码略*/</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.rS-1</span>&#123;</span><br><span class="line">  <span class="comment">/*相关样式，代码略*/</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.rS-2</span>&#123;</span><br><span class="line">  <span class="comment">/*相关样式，代码略*/</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.rS-3</span>&#123;</span><br><span class="line">  <span class="comment">/*相关样式，代码略*/</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>在页面中添加以下 js 代码：</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> rightsideShow = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;.rightside-show&#x27;</span>);</span><br><span class="line"></span><br><span class="line">rightsideShow.<span class="property">classList</span>.<span class="title function_">add</span>(<span class="string">&#x27;rS-1&#x27;</span>);</span><br><span class="line">rightsideShow.<span class="property">classList</span>.<span class="title function_">add</span>(<span class="string">&#x27;rS-2&#x27;</span>);</span><br><span class="line">rightsideShow.<span class="property">classList</span>.<span class="title function_">remove</span>(<span class="string">&#x27;rightside-show&#x27;</span>);</span><br></pre></td></tr></table></figure><p>那么这部分类名将会变成：</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;rightside&quot;</span> <span class="attr">class</span>=<span class="string">&quot;rS-1 rS-2&quot;</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!--其余内容，代码略--&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="复制元素">复制元素</h2><details class="toggle"><summary class="toggle-button">Node.cloneNode</summary><div class="toggle-content"><p>这个方法可以返回调用该方法的节点的一个副本。使用方法如下：</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> dupNode = node.<span class="title function_">cloneNode</span>(deep);</span><br></pre></td></tr></table></figure><ul><li>node 将要被克隆的节点</li><li>dupNode 克隆生成的副本节点</li><li>deep （可选）是否采用深度克隆，如果为 true，则该节点的所有后代节点也都会被克隆，如果为 false，则只克隆该节点本身。</li></ul></div></details><p>按照开头那个例子，如果想把<code>简繁转换</code>按钮原样复制到<code>设置</code>按钮上方，则可以使用这样的代码：</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> translateLink = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;translateLink&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> rightsideConfig= <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;rightside-config&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 克隆元素</span></span><br><span class="line"><span class="keyword">const</span> translateLinkCloned = translateLink.<span class="title function_">cloneNode</span>(<span class="literal">true</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 将克隆的元素插入到 rightsideConfig 元素之前</span></span><br><span class="line">rightsideConfig.<span class="property">parentNode</span>.<span class="title function_">insertBefore</span>(translateLinkCloned, rightsideConfig);</span><br></pre></td></tr></table></figure><h2 id="未完待续">未完待续</h2><p>参考资料来源：</p><blockquote><p><a target="_blank" href="https://developer.mozilla.org/zh-CN/" rel="external nofollow noreferrer noopener">https://developer.mozilla.org/zh-CN/</a></p></blockquote><p><s>暂时写到这里，将来可能会添加新内容</s></p></article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta"><i class="fas fa-circle-user fa-fw"></i>文章作者:</span> <span class="post-copyright-info"><a href="https://blog.sakurink.eu.org">R҉anm⌬</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta"><i class="fas fa-square-arrow-up-right fa-fw"></i>文章链接:</span> <span class="post-copyright-info"><a href="https://blog.sakurink.eu.org/posts/3029518241/">https://blog.sakurink.eu.org/posts/3029518241/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta"><i class="fas fa-circle-exclamation fa-fw"></i>版权声明:</span> <span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来源 <a href="https://blog.sakurink.eu.org" target="_blank">雨梦清欢</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/web/">web</a><a class="post-meta__tags" href="/tags/%E5%89%8D%E7%AB%AF/">前端</a></div><div class="post-share"><div class="social-share" data-image="//cdncf-assets.sakurink.eu.org/blogassets/img/randimg/9.jpg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://npm.elemecdn.com/butterfly-extsrc@latest/sharejs/dist/css/share.min.css" media="print" onload='this.media="all"'><script src="https://npm.elemecdn.com/butterfly-extsrc@latest/sharejs/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><a class="pagination-related" href="/posts/1628586937/" title="从零开始搭建 Minecraft 服务器"><img class="cover" src="//cdncf-assets.sakurink.eu.org/blogassets/img/randimg/5.jpg" onerror='onerror=null,src="/img/404.jpg"' alt="cover of previous post"><div class="info"><div class="info-1"><div class="info-item-1">上一篇</div><div class="info-item-2">从零开始搭建 Minecraft 服务器</div></div><div class="info-2"><div class="info-item-1">曾经我玩 MC...</div></div></div></a><a class="pagination-related" href="/posts/3860265803/" title="GitCode 批量搬运 GitHub 项目"><img class="cover" src="//cdncf-assets.sakurink.eu.org/blogassets/img/randimg/5.jpg" onerror='onerror=null,src="/img/404.jpg"' alt="cover of next post"><div class="info text-right"><div class="info-1"><div class="info-item-1">下一篇</div><div class="info-item-2">GitCode 批量搬运 GitHub 项目</div></div><div class="info-2"><div class="info-item-1">最近看到一个消息，https://gitcode.com/ 平台（CSDN 的）正在批量搬运 Github 开源项目，甚至非常贴心地将 README.md 中的链接替换为 GitCode...</div></div></div></a></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>相关推荐</span></div><div class="relatedPosts-list"><a class="pagination-related" href="/posts/912248532/" title="Cloudflare 反代 jsDelivr"><img class="cover" src="//cdncf-assets.sakurink.eu.org/blogassets/img/randimg/10.jpg" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2023-12-23</div><div class="info-item-2">Cloudflare 反代 jsDelivr</div></div><div class="info-2"><div class="info-item-1">背景： 2021 年 12 月 20 日，jsDelivr 团队主要负责人 Dmitriy Akulov 在 官方 GitHub 仓库发布说明。jsDelivr 的 ICP 被吊销，短时间内，无法也不会提供基于国内节点的托管服务。现在 jsDelivr 国内线路也是从国外绕的，这令在中国大陆地区的速度相较于此前慢了很多。 由于 jsDelivr...</div></div></div></a><a class="pagination-related" href="/posts/3639312373/" title="Electron初识：将web页面变成桌面应用程序"><img class="cover" src="//cdncf-assets.sakurink.eu.org/blogassets/img/randimg/1.jpg" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2024-08-02</div><div class="info-item-2">Electron初识：将web页面变成桌面应用程序</div></div><div class="info-2"><div class="info-item-1">前排提示：使用这东西需要有一定的耐心，配置出故障是正常的。本文虽不是面向小白，但自认为比较详细（恐但凡疏忽便再难成功）。 之前使用过一个名为 Nativefier 的工具，它基于 Electronjs，可以将网页打包为桌面客户端，颇有意思。玩久了感觉命令写来有点琐碎，故直接尝试...</div></div></div></a><a class="pagination-related" href="/posts/1477501590/" title="Hexo Butterfly 个人美化记录"><img class="cover" src="//cdncf-assets.sakurink.eu.org/blogassets/img/randimg/3.jpg" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2023-09-02</div><div class="info-item-2">Hexo Butterfly 个人美化记录</div></div><div class="info-2"><div class="info-item-1">持续更新中。基于 Butterfly 主题，其他主题不保证成功。</div></div></div></a><a class="pagination-related" href="/posts/2223589302/" title="Vercel 无服务器部署 php 程序"><img class="cover" src="//cdncf-assets.sakurink.eu.org/blogassets/img/randimg/1.jpg" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2023-10-26</div><div class="info-item-2">Vercel 无服务器部署 php 程序</div></div><div class="info-2"><div class="info-item-1">写在前面vercel 规定了程序没有写入权限，唯一拥有写入权限的只有/tmp这个临时目录。考虑用这种方法的，大多是“实验”或 api 等小 php 项目的（特地弄个服务器不大划算？）。 你可能见过有人用这样的操作部署了 Typecho 等程序，那是另编写了类似于config.inc.php之类的配置文件实现的——不过按照这个思路实现安装 WordPress 等亦非不可。...</div></div></div></a><a class="pagination-related" href="/posts/4242742085/" title="使用 Cloudflare Pages 托管静态网站"><img class="cover" src="//cdncf-assets.sakurink.eu.org/blogassets/img/randimg/1.jpg" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2024-07-08</div><div class="info-item-2">使用 Cloudflare Pages 托管静态网站</div></div><div class="info-2"><div class="info-item-1">这个站点是部署在 GitHub Pages 上的，如你所见，在某些情况下访问速度令人不敢恭维。之前某次因为未知原因 Cloudflare 又一次在国内受到“特别关照”，不得已关了一些功能。最近感觉站点访问速度出奇地慢，换了 CDN 也未见明显好转。 一开始在选择部署平台时便对 CF Pages...</div></div></div></a><a class="pagination-related" href="/posts/4220845552/" title="如何从 Wayback Machine 中删除你的网站"><img class="cover" src="//cdncf-assets.sakurink.eu.org/blogassets/img/randimg/1.jpg" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2024-12-06</div><div class="info-item-2">如何从 Wayback Machine 中删除你的网站</div></div><div class="info-2"><div class="info-item-1">Internet Archive （互联网档案馆，为了方便，下文我们将其简称为 IA）有一个功能叫 Wayback Machine，它可以对全世界所有的网页进行备份保存，任何人都可以通过这个网站查看到一个网站过去的样子，即使它现在已经被删除或修改。 然而，如果在网站中不慎更新了不愿被看到的内容，又或是有过时的信息，一旦被 IA 的 Bot 爬取，就会被保存下来。你无法在 IA...</div></div></div></a></div></div><hr class="custom-hr"><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="fas fa-comments fa-fw"></i> <span>评论</span></div></div><div class="comment-wrap"><div><div id="waline-wrap"></div></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info text-center"><div class="avatar-img"><img src="/img/avatar.png" onerror='this.onerror=null,this.src="/img/friend_404.gif"' alt="avatar"></div><div class="author-info-name">R҉anm⌬</div><div class="author-info-description">学习记录与分享，本网站随缘更新。</div><div class="site-data"><a href="/archives/"><div class="headline">文章</div><div class="length-num">79</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">34</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">7</div></a></div><div class="card-info-social-icons"><a class="social-icon" href="https://sakurink.eu.org/" target="_blank"><i class="fas fa-feather-alt"></i></a><a class="social-icon" href="https://blog.sakurink.eu.org/atom.xml" target="_blank"><i class="fas fa-rss"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>公告</span></div><div class="announcement_content">站点速度较慢，请等待全部加载完成后再进行操作，体验更佳。如果发现页面加载故障，请善用刷新。本站所有内容仅供参考，请谨慎使用，不得将其用于违规行为，否则后果自负。【当前域名请使用"https://"访问，否则大概率要被重置连接】</div></div><div class="card-widget card-ctools" id="card-ctools"><div class="item-headline"><i class="fas fa-tools"></i><span>控制器</span></div><div class="item-content"><span class="button-bfblue" onclick="location.reload()">刷新页面</span><br><span class="button-bfblue" onclick="location.replace(location.href)">强制刷新</span><br><span class="button-bfblue" onclick="openPanel()">控制面板</span></div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%80%89%E6%8B%A9-DOM"><span class="toc-number">1.</span> <span class="toc-text">选择 DOM</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%8E%B7%E5%8F%96%E5%8F%98%E9%87%8F"><span class="toc-number">2.</span> <span class="toc-text">获取变量</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%8F%92%E5%85%A5%E5%85%83%E7%B4%A0"><span class="toc-number">3.</span> <span class="toc-text">插入元素</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#DOM-%E4%BD%8D%E7%BD%AE%E7%A7%BB%E5%8A%A8"><span class="toc-number">4.</span> <span class="toc-text">DOM 位置移动</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%9A%90%E8%97%8F%E6%88%96%E7%A7%BB%E9%99%A4"><span class="toc-number">5.</span> <span class="toc-text">隐藏或移除</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%9B%BF%E6%8D%A2%E5%85%83%E7%B4%A0"><span class="toc-number">6.</span> <span class="toc-text">替换元素</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BF%AE%E6%94%B9-class-%E4%BB%A5%E5%8C%B9%E9%85%8D%E4%B8%8D%E5%90%8C%E6%A0%B7%E5%BC%8F"><span class="toc-number">7.</span> <span class="toc-text">修改 class 以匹配不同样式</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%A4%8D%E5%88%B6%E5%85%83%E7%B4%A0"><span class="toc-number">8.</span> <span class="toc-text">复制元素</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%9C%AA%E5%AE%8C%E5%BE%85%E7%BB%AD"><span class="toc-number">9.</span> <span class="toc-text">未完待续</span></a></li></ol></div></div></div></div></main><footer id="footer" style="background:0 0"><div id="footer-wrap"></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="translateLink" type="button" title="简繁转换">繁</button><button id="darkmode" type="button" title="日间和夜间模式切换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><a id="to_comment" href="#post-comment" title="前往评论"><i class="fas fa-comments"></i></a><button id="go-up" type="button" title="回到顶部"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div class="hide" id="settingPanel"><div id="settingTopBar"><div class="settingTopBarLeft"><button class="hide" id="settingBackToMain2"><i class="fas fa-chevron-left"></i>返回</button><h3>控制面板</h3></div><div class="settingTopBarRight"><button class="settingPanelClose" id="settingPanelClose" onclick="closePanel()">✖</button></div></div><div id="settingMain"><div class="fade fade-in" id="settingTabs"><button id="settings-general"><i class="fas fa-layer-group"></i>通用</button><button id="settings-fonts"><i class="fas fa-font"></i>字体</button><button id="settings-background"><i class="fas fa-image"></i>背景</button><button id="settings-test"><i class="fas fa-code"></i>测试</button><button id="settings-about"><i class="fas fa-circle-info"></i>关于</button></div><div class="hide fade fade-out" id="settingItems"><div id="settings-general-Content"><h3>主题</h3><div class="settingSwitchCheckBox"><div class="settingSwitchCheckBoxMain"><input id="aplayerOnOff" onclick="aplayerState()" type="checkbox"><div class="content-text">Aplayer开关</div></div><div class="settingSwitchCheckBoxMain"><input id="fpsDisplay" onclick="fpsState()" type="checkbox"><div class="content-text">帧率检测</div></div><div class="settingSwitchCheckBoxMain"><input id="universeEffect" onclick="universeState()" type="checkbox"><div class="content-text">背景流星（夜间模式）</div></div><div class="settingSwitchCheckBoxMain"><input id="variable1" onclick="switchState1()" type="checkbox"><div class="content-text">测试按钮【供调试使用】</div></div></div><hr><div class="slider-container"><div class="value-display">控制台透明度：<span id="valueDisplaySp"></span></div><input id="opacityRangeSp" value="95" max="100" min="0" type="range"></div><div class="slider-container"><div class="value-display">控制台按钮透明度：<span id="valueDisplaySpButtons"></span></div><input id="opacityRangeSpButtons" value="30" max="100" min="0" type="range"></div><hr><h3>清理</h3><div><button id="resetSwitches">还原所有设置开关</button><button id="resetRangeBar">还原所有范围控件</button><button id="clearSessionStorage" style="display:none">清除 SessionStorage</button><button id="clearLocalStorage" style="display:none">清除 LocalStorage（还原设置）</button><button id="clearCookies" style="display:none">清除 Cookies</button><button id="clearServiceWorkers" style="display:none">清除 Service Workers 缓存</button><button id="clearCaches">清除缓存</button></div><hr><h3>控制</h3><div><button onclick="location.reload()">刷新页面</button><button onclick="location.replace(location.href)">强制刷新</button><br><button onclick="closePanel()">关闭控制台</button></div></div><div id="settings-fonts-Content"><h3>字体</h3><div class="aTabsStyle"><a onclick='setFont("LXGW Wenkai Screen")' style="font-family:'LXGW Wenkai Screen'!important" rel="noopener external nofollow" href="javascript:;">霞鹜文楷</a><a onclick='setFont("Source Han Serif SC Medium")' style="font-family:'Source Han Serif SC Medium'!important" rel="noopener external nofollow" href="javascript:;">思源宋体</a><a onclick='setFont("Source Han Sans CN Medium")' style="font-family:'Source Han Sans CN Medium'!important" rel="noopener external nofollow" href="javascript:;">思源黑体（Medium）</a><a onclick='setFont("Source Han Sans CN Normal")' style="font-family:'Source Han Sans CN Normal'!important" rel="noopener external nofollow" href="javascript:;">思源黑体（Normal）</a><a onclick='setFont("JiangChengYuanTi")' style="font-family:JiangChengYuanTi!important" rel="noopener external nofollow" href="javascript:;">江城圆体（400W）</a><a onclick='setFont("main")' style="font-family:-apple-system,IBM Plex Mono,monospace,'微软雅黑',sans-serif" rel="noopener external nofollow" href="javascript:;">系统默认</a></div><button id="resetFont">恢复默认字体</button></div><div id="settings-background-Content"><div id="article-container" style="padding:10px"><p><button id="resetBg" style="background:#1ba784;display:block;width:100%;padding:8px 0;border-radius:5px;color:#fff;text-align:center"><i class="fa-solid fa-arrows-rotate"></i>恢复默认背景（不影响其他设置）</button></p><h3 id="图片（宽屏）"><a class="headerlink" title="图片（宽屏）" href="#图片（宽屏）"></a>图片（宽屏）</h3><div class="bgbox"><a class="imgbox" onclick='changeBg("url(https://cdncf-assets.sakurink.eu.org/blogassets/img/bg/bg-pc-1.jpg)")' style="background-image:url(https://cdncf-assets.sakurink.eu.org/blogassets/img/bg/bg-pc-1.jpg)" rel="noopener external nofollow" href="javascript:;"></a><a class="imgbox" onclick='changeBg("url(https://cdncf-assets.sakurink.eu.org/blogassets/img/bg/bg-pc-2.jpg)")' style="background-image:url(https://cdncf-assets.sakurink.eu.org/blogassets/img/bg/bg-pc-2.jpg)" rel="noopener external nofollow" href="javascript:;"></a><a class="imgbox" onclick='changeBg("url(https://cdncf-assets.sakurink.eu.org/blogassets/img/bg/bg-pc-3.jpg)")' style="background-image:url(https://cdncf-assets.sakurink.eu.org/blogassets/img/bg/bg-pc-3.jpg)" rel="noopener external nofollow" href="javascript:;"></a><a class="imgbox" onclick='changeBg("url(https://cdncf-assets.sakurink.eu.org/blogassets/img/bg/bg-pc-4.jpg)")' style="background-image:url(https://cdncf-assets.sakurink.eu.org/blogassets/img/bg/bg-pc-4.jpg)" rel="noopener external nofollow" href="javascript:;"></a><a class="imgbox" onclick='changeBg("url(https://cdn-hw-static2.shanhutech.cn/bizhi/staticwp/202307/8fcf913bba1a703714e2dc7cd1bdba3e--2133436291.jpg)")' style="background-image:url(https://cdn-hw-static2.shanhutech.cn/bizhi/staticwp/202307/8fcf913bba1a703714e2dc7cd1bdba3e--2133436291.jpg)" rel="noopener external nofollow" href="javascript:;"></a><a class="imgbox" onclick='changeBg("url(https://cdn-hw-static2.shanhutech.cn/bizhi/staticwp/202407/18eb61a58120b76130803b26246d83f7--208058497.jpg)")' style="background-image:url(https://cdn-hw-static2.shanhutech.cn/bizhi/staticwp/202407/18eb61a58120b76130803b26246d83f7--208058497.jpg)" rel="noopener external nofollow" href="javascript:;"></a><a class="imgbox" onclick='changeBg("url(https://cdn-hw-static2.shanhutech.cn/bizhi/staticwp/202408/4d78b8c4a3a3547c0e3b21b85401b687--1602406427.jpg)")' style="background-image:url(https://cdn-hw-static2.shanhutech.cn/bizhi/staticwp/202408/4d78b8c4a3a3547c0e3b21b85401b687--1602406427.jpg)" rel="noopener external nofollow" href="javascript:;"></a><a class="imgbox" onclick='changeBg("url(https://cdn-hw-static2.shanhutech.cn/bizhi/staticwp/202405/4a913a3a8d36b0fd2dd28de7cb9f7c08--2822596592.jpg)")' style="background-image:url(https://cdn-hw-static2.shanhutech.cn/bizhi/staticwp/202405/4a913a3a8d36b0fd2dd28de7cb9f7c08--2822596592.jpg)" rel="noopener external nofollow" href="javascript:;"></a></div><h3 id="图片（移动端）"><a class="headerlink" title="图片（移动端）" href="#图片（移动端）"></a>图片（移动端）</h3><div class="bgbox"><a class="imgbox" onclick='changeBg("url(https://cdncf-assets.sakurink.eu.org/blogassets/img/bg/bg-m-1.jpg)")' style="background-image:url(https://cdncf-assets.sakurink.eu.org/blogassets/img/bg/bg-m-1.jpg)" rel="noopener external nofollow" href="javascript:;"></a><a class="imgbox" onclick='changeBg("url(https://cdncf-assets.sakurink.eu.org/blogassets/img/bg/bg-m-2.jpg)")' style="background-image:url(https://cdncf-assets.sakurink.eu.org/blogassets/img/bg/bg-m-2.jpg)" rel="noopener external nofollow" href="javascript:;"></a><a class="imgbox" onclick='changeBg("url(https://cdncf-assets.sakurink.eu.org/blogassets/img/bg/bg-m-3.jpg)")' style="background-image:url(https://cdncf-assets.sakurink.eu.org/blogassets/img/bg/bg-m-3.jpg)" rel="noopener external nofollow" href="javascript:;"></a><a class="imgbox" onclick='changeBg("url(https://cdncf-assets.sakurink.eu.org/blogassets/img/bg/bg-m-4.jpg)")' style="background-image:url(https://cdncf-assets.sakurink.eu.org/blogassets/img/bg/bg-m-4.jpg)" rel="noopener external nofollow" href="javascript:;"></a></div><h3 id="图片（随机-宽屏）"><a class="headerlink" title="图片（随机-宽屏）" href="#图片（随机-宽屏）"></a>图片（随机-宽屏）</h3><div class="bgbox"><a class="imgbox" onclick='changeBg("url(https://bing.img.run/1920x1080.php)")' style="background-image:url(https://bing.img.run/1920x1080.php)" rel="noopener external nofollow" href="javascript:;"></a><a class="imgbox" onclick='changeBg("url(https://t.mwm.moe/pc)")' style="background-image:url(https://t.mwm.moe/pc)" rel="noopener external nofollow" href="javascript:;"></a><a class="imgbox" onclick='changeBg("url(https://img.paulzzh.com/touhou/random)")' style="background-image:url(https://img.paulzzh.com/touhou/random)" rel="noopener external nofollow" href="javascript:;"></a><a class="imgbox" onclick='changeBg("url(https://api.yimian.xyz/img?size=1920x1080)")' style="background-image:url(https://api.yimian.xyz/img?size=1920x1080)" rel="noopener external nofollow" href="javascript:;"></a></div><h3 id="渐变色"><a class="headerlink" title="渐变色" href="#渐变色"></a>渐变色</h3><div class="bgbox"><a class="colorbox" onclick='changeBg("linear-gradient(to right, #eecda3, #ef629f)")' style="background:linear-gradient(to right,#eecda3,#ef629f)" rel="noopener external nofollow" href="javascript:;"></a><a class="colorbox" onclick='changeBg("linear-gradient(to right, #e4afcb 0%, #b8cbb8 0%, #b8cbb8 0%, #e2c58b 30%, #c2ce9c 64%, #7edbdc 100%)")' style="background:linear-gradient(to right,#e4afcb 0,#b8cbb8 0,#b8cbb8 0,#e2c58b 30%,#c2ce9c 64%,#7edbdc 100%)" rel="noopener external nofollow" href="javascript:;"></a><a class="colorbox" onclick='changeBg("linear-gradient(to top, #30cfd0 0%, #330867 100%)")' style="background:linear-gradient(to top,#30cfd0 0,#330867 100%)" rel="noopener external nofollow" href="javascript:;"></a><a class="colorbox" onclick='changeBg("linear-gradient(to top, #a18cd1 0%, #fbc2eb 100%)")' style="background:linear-gradient(to top,#a18cd1 0,#fbc2eb 100%)" rel="noopener external nofollow" href="javascript:;"></a><a class="colorbox" onclick='changeBg("linear-gradient(to right, #EAECC6, #2BC0E4)")' style="background:linear-gradient(to right,#eaecc6,#2bc0e4)" rel="noopener external nofollow" href="javascript:;"></a><a class="colorbox" onclick='changeBg("linear-gradient(60deg, #ffd7e4 0%, #c8f1ff 100%)")' style="background:linear-gradient(60deg,#ffd7e4 0,#c8f1ff 100%)" rel="noopener external nofollow" href="javascript:;"></a></div><h3 id="纯色"><a class="headerlink" title="纯色" href="#纯色"></a>纯色</h3><div class="bgbox"><a class="colorbox" onclick='changeBg("#eef7f2")' style="background:#eef7f2" rel="noopener external nofollow" href="javascript:;"></a><a class="colorbox" onclick='changeBg("#7D9D9C")' style="background:#7d9d9c" rel="noopener external nofollow" href="javascript:;"></a><a class="colorbox" onclick='changeBg("#C7EDCC")' style="background:#c7edcc" rel="noopener external nofollow" href="javascript:;"></a><a class="colorbox" onclick='changeBg("#E3DCCF")' style="background:#e3dccf" rel="noopener external nofollow" href="javascript:;"></a><a class="colorbox" onclick='changeBg("#0F69B8")' style="background:#0f69b8" rel="noopener external nofollow" href="javascript:;"></a><a class="colorbox" onclick='changeBg("#F0AABE")' style="background:#f0aabe" rel="noopener external nofollow" href="javascript:;"></a></div></div></div><div id="settings-test-Content"><h2>什么是Lorem Ipsum?</h2><p>Lorem Ipsum，也称乱数假文或者哑元文本， 是印刷及排版领域所常用的虚拟文字。由于曾经一台匿名的打印机刻意打乱了一盒印刷字体从而造出一本字体样品书，Lorem Ipsum从西元15世纪起就被作为此领域的标准文本使用。它不仅延续了五个世纪，还通过了电子排版的挑战，其雏形却依然保存至今。在1960年代，”Leatraset”公司发布了印刷着Lorem Ipsum段落的纸张，从而广泛普及了它的使用。最近，计算机桌面出版软件”Aldus PageMaker”也通过同样的方式使Lorem Ipsum落入大众的视野。</p><h2>字母测试</h2><p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Maecenas justo elit, posuere ac vestibulum at, hendrerit sed lectus. Aliquam hendrerit faucibus odio sed dignissim. Morbi nec nisl non mi tincidunt faucibus id vitae lectus. Etiam scelerisque nisl velit, sed euismod risus congue nec. Quisque hendrerit tortor eu arcu posuere, eu mattis purus egestas. Nulla tincidunt aliquet magna ac scelerisque. Suspendisse sed orci iaculis, elementum elit in, laoreet mi. Praesent mauris lectus, ultricies nec quam sed, pretium tristique diam. Aenean vitae vulputate dui, et elementum erat. Donec eros dui, porta et ipsum id, mattis dapibus turpis. Praesent vel nisi vitae mi faucibus sagittis id eu tortor. Nam dignissim dolor nec odio fringilla vulputate. Morbi vehicula elit at bibendum finibus. Nullam at enim diam. In consectetur urna sit amet ipsum euismod suscipit. Donec nec finibus eros.</p></div><div id="settings-about-Content"><div style="display:flex;justify-content:center;align-items:center;text-align:center"><div class="highlighter-green" style="display:inline-block;color:#fff;font-weight:700;font-style:italic;text-shadow:1px 1px 5px #000"><b>Sakurink Control Panel</b></div></div><br><div>Version：0.3.X</div><div style="font-style:italic">更多设置</div><hr><div><b>【更新一览】</b></div><br><div>【说明】</div><ul><li>这是一个实验性功能，目前代码逻辑不佳，仅可用于测试</li><li>未来可能会转为“正式版”</li></ul></div></div><div class="fade fade-in" id="settingWidget"></div></div><div id="settingBottomBar"><button id="settingScrollToTop"><i class="fas fa-arrow-up"></i>返回顶部</button><button onclick="clearLocalStorage()"><i class="fas fa-arrows-rotate"></i>还原设置</button><button id="settingFullScreen"><i class="fas fa-expand"></i>全屏</button><button id="menu-darkmode"><i class="fas fa-moon"></i>昼夜切换</button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="https://npm.elemecdn.com/@fancyapps/ui@latest/dist/fancybox/fancybox.umd.js"></script><script src="https://lf6-cdn-tos.bytecdntp.com/cdn/expire-1-M/instant.page/5.1.0/instantpage.min.js" type="module"></script><script src="https://lf6-cdn-tos.bytecdntp.com/cdn/expire-1-M/node-snackbar/0.1.16/snackbar.min.js"></script><div class="js-pjax"><script>(async()=>{window.katex_js_css||(window.katex_js_css=!0,await btf.getCSS("https://npm.elemecdn.com/katex@latest/dist/katex.min.css"),await btf.getScript("https://npm.elemecdn.com/katex@latest/dist/contrib/copy-tex.min.js")),document.querySelectorAll("#article-container .katex").forEach((t=>t.classList.add("katex-show")))})()</script><script>(()=>{let e=window.walineFn||null;const t=GLOBAL_CONFIG_SITE.isShuoshuo,n={reaction:!1,search:!1},i=(e,i=document,a=window.location.pathname)=>{const l=e({el:i.querySelector("#waline-wrap"),serverURL:"https://apivc-waline.sakurink.eu.org",pageview:!1,dark:'html[data-theme="dark"]',comment:!1,...n,path:t?a:n&&n.path||a});t&&(window.shuoshuoComment.destroyWaline=()=>{l.destroy(),i.children.length&&(i.innerHTML="",i.classList.add("no-comment"))})},a=(t,n)=>{e?i(e,t,n):btf.getCSS("https://fastly.jsdelivr.net/npm/@waline/client@latest/dist/waline.min.css").then((()=>import("https://fastly.jsdelivr.net/npm/@waline/client@latest/dist/waline.umd.min.js"))).then((({init:a})=>{e=a||Waline.init,i(e,t,n),window.walineFn=e}))};t?window.shuoshuoComment={loadComment:a}:btf.loadComment(document.getElementById("waline-wrap"),a)})()</script></div><script data-pjax src="/js/browsercheck.js"></script><script defer src="/js/reurl.js"></script><script defer data-pjax src="/js/sakurink.js"></script><canvas id="universe"></canvas><script defer data-pjax src="/js/universe.js"></script><script defer data-pjax src="/js/consolex.js"></script><meting-js class="aplayerBgMusic" server="netease" type="playlist" id="8735348027" fixed="true" mini="true" volume="0.2" listfolded="true" preload="none" autoplay muted></meting-js><script defer id="fluttering_ribbon" mobile="true" src="https://npm.elemecdn.com/butterfly-extsrc@1.1.3/dist/canvas-fluttering-ribbon.min.js"></script><link rel="stylesheet" href="https://lf6-cdn-tos.bytecdntp.com/cdn/expire-1-M/aplayer/1.10.1/APlayer.min.css" media="print" onload='this.media="all"'><script src="https://lf6-cdn-tos.bytecdntp.com/cdn/expire-1-M/aplayer/1.10.1/APlayer.min.js"></script><script src="/js/Meting-sr.min.js"></script><script>btf.addGlobalFn("pjaxSend",(()=>{if(window.aplayers)for(let a=0;a<window.aplayers.length;a++)window.aplayers[a].options.fixed||window.aplayers[a].destroy()}),"destroyAplayer"),btf.addGlobalFn("pjaxComplete",loadMeting,"runMetingJS")</script><script src="https://npm.elemecdn.com/pjax@latest/pjax.min.js"></script><script>(()=>{window.pjax=new Pjax({elements:'a:not([target="_blank"])',selectors:["head > title","#config-diff","#body-wrap","#rightside-config-hide","#rightside-config-show",".js-pjax"],cacheBust:!1,analytics:!1,scrollRestoration:!1});const e=e=>{e&&Object.values(e).forEach((e=>e()))};document.addEventListener("pjax:send",(()=>{btf.removeGlobalFnEvent("pjaxSendOnce"),btf.removeGlobalFnEvent("themeChange");const t=document.body.classList;t.contains("read-mode")&&t.remove("read-mode"),e(window.globalFn.pjaxSend)})),document.addEventListener("pjax:complete",(()=>{btf.removeGlobalFnEvent("pjaxCompleteOnce"),document.querySelectorAll("script[data-pjax]").forEach((e=>{const t=document.createElement("script"),n=e.text||e.textContent||e.innerHTML||"";Array.from(e.attributes).forEach((e=>t.setAttribute(e.name,e.value))),t.appendChild(document.createTextNode(n)),e.parentNode.replaceChild(t,e)})),e(window.globalFn.pjaxComplete)})),document.addEventListener("pjax:error",(e=>{404===e.request.status&&pjax.loadUrl("/404.html")}))})()</script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">搜索</span><span id="loading-status"></span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="text-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i> <span>数据加载中</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章" type="text"></div></div><hr><div id="local-search-results"></div><div id="local-search-stats-wrap"></div></div></div><div id="search-mask"></div><script src="/js/search/local-search.js"></script></div></div><script data-pjax>function butterfly_footer_beautify_injector_config(){var t=document.getElementById("footer-wrap");console.log("已挂载butterfly_footer_beautify"),t.insertAdjacentHTML("beforeend",'<div id="workboard"></div><p id="ghbdages"><a class="github-badge" target="_blank" href="https://hexo.io/" style="margin-inline:5px" data-title="博客框架为Hexo" title=""><img src="https://img.shields.io/badge/Frame-Hexo-blue?style=flat&amp;logo=hexo" alt=""/></a><a class="github-badge" target="_blank" href="https://butterfly.js.org/" style="margin-inline:5px" data-title="主题为Butterfly" title=""><img src="https://img.shields.io/badge/Theme-Butterfly-6513df?style=flat&amp;logo=bitdefender" alt=""/></a><a class="github-badge" target="_blank" href="https://www.jsdelivr.com/" style="margin-inline:5px" data-title="本站使用JsDelivr为静态资源提供CDN加速" title=""><img src="https://img.shields.io/badge/CDN-jsDelivr-orange?style=flat&amp;logo=jsDelivr" alt=""/></a><a class="github-badge" target="_blank" href="https://github.com/" style="margin-inline:5px" data-title="本站项目由Gtihub托管" title=""><img src="https://img.shields.io/badge/Source-Github-d021d6?style=flat&amp;logo=GitHub" alt=""/></a><a class="github-badge" target="_blank" href="http://creativecommons.org/licenses/by-nc-sa/4.0/" style="margin-inline:5px" data-title="本站除特殊说明外采用知识共享署名-非商业性使用-相同方式共享4.0国际许可协议进行许可" title=""><img src="https://img.shields.io/badge/Copyright-BY--NC--SA%204.0-d42328?style=flat&amp;logo=Claris" alt=""/></a></p>')}for(var elist="null".split(","),cpage=location.pathname,epage="all",flag=0,i=0;i<elist.length;i++)cpage.includes(elist[i])&&flag++;("all"===epage&&0==flag||epage===cpage)&&butterfly_footer_beautify_injector_config()</script><script async src="/js/runtime.js"></script><script async>window.onload=function(){var e=document.createElement("script"),t=document.getElementsByTagName("script")[0];e.type="text/javascript",e.async=!0,e.src="/sw-register.js?v="+Date.now(),t.parentNode.insertBefore(e,t)}</script></body></html>